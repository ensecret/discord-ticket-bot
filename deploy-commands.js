const { REST, Routes } = require('discord.js');
require('dotenv').config();

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
const commands = [
    {
        name: 'setup-tickets',
        description: '–°–æ–∑–¥–∞—Ç—å –ø–∞–Ω–µ–ª—å —Ç–∏–∫–µ—Ç–æ–≤ –≤ —Ç–µ–∫—É—â–µ–º –∫–∞–Ω–∞–ª–µ',
        defaultMemberPermissions: '8' // –¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    }
];

async function deployCommands() {
    if (!process.env.TOKEN || !process.env.CLIENT_ID) {
        console.error('–û—à–∏–±–∫–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç TOKEN –∏–ª–∏ CLIENT_ID –≤ —Ñ–∞–π–ª–µ .env');
        process.exit(1);
    }

    const rest = new REST({ version: '10' }).setToken(process.env.TOKEN);

    try {
        console.log('–ù–∞—á–∏–Ω–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é slash-–∫–æ–º–∞–Ω–¥...');

        // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—ã –≥–ª–æ–±–∞–ª—å–Ω–æ
        const data = await rest.put(
            Routes.applicationCommands(process.env.CLIENT_ID),
            { body: commands }
        );

        console.log(`‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ ${data.length} –∫–æ–º–∞–Ω–¥`);
        console.log('üîπ –ö–æ–º–∞–Ω–¥—ã —Å—Ç–∞–Ω—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞');
        console.log('üî∏ –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Discord –∫–ª–∏–µ–Ω—Ç');
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥:', error);
        process.exit(1);
    }
}

deployCommands(); 